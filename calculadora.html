<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Dual Pro</title>
    <style>
        :root {
            --bg: #1a1a1a;
            --panel: #2d2d2d;
            --accent: #f2a154;
            --blue: #5183b4;
            --green: #539d67;
            --text: #ffffff;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: #121212;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: white;
        }

        .calculator {
            background: var(--panel);
            width: 360px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.6);
        }

        /* Pantallas de Programador */
        .prog-display {
            display: none; /* Se activa en modo programador */
            flex-direction: column;
        }

        .base-row {
            display: flex;
            padding: 10px;
            border-bottom: 1px solid #444;
            align-items: center;
        }

        .base-label { width: 60px; font-weight: bold; font-size: 0.8rem; }
        .base-value { flex: 1; text-align: right; font-family: monospace; font-size: 1.2rem; }
        .active-base { background: rgba(83, 157, 103, 0.2); }

        /* Pantalla Estándar */
        #main-display {
            height: 80px;
            padding: 20px;
            font-size: 2.5rem;
            text-align: right;
            background: #222;
        }

        /* Controles */
        .mode-bar {
            background: #333;
            padding: 10px;
            display: flex;
            justify-content: space-between;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1px;
            background: #444;
        }

        .prog-grid {
            grid-template-columns: repeat(6, 1fr); /* Para A-F */
        }

        button {
            border: none;
            padding: 20px 10px;
            font-size: 1.1rem;
            background: #3a3a3a;
            color: white;
            cursor: pointer;
        }

        button:hover { background: #4a4a4a; }
        button.op { background: var(--blue); }
        button.special { background: var(--accent); }
        button.hex { background: #555; display: none; } /* Ocultos por defecto */

        .active-mode-btn { border-bottom: 2px solid var(--accent); }
    </style>
</head>
<body>

<div class="calculator">
    <div class="mode-bar">
        <button onclick="switchMode('std')" id="btn-std" class="active-mode-btn">Estándar</button>
        <button onclick="switchMode('prog')" id="btn-prog">Programador</button>
    </div>

    <div id="std-screen">
        <div id="main-display">0</div>
    </div>

    <div id="prog-screen" class="prog-display">
        <div class="base-row" style="background: var(--blue)"><span class="base-label">HEX</span><span id="val-hex" class="base-value">0</span></div>
        <div class="base-row active-base" style="background: var(--green)"><span class="base-label">DEC</span><span id="val-dec" class="base-value">0</span></div>
        <div class="base-row" style="background: var(--blue)"><span class="base-label">OCT</span><span id="val-oct" class="base-value">0</span></div>
        <div class="base-row" style="background: #555"><span class="base-label">BIN</span><span id="val-bin" class="base-value" style="font-size: 0.8rem">0000 0000</span></div>
    </div>

    <div class="grid" id="button-grid">
        <button class="hex" onclick="press('A')">A</button>
        <button class="hex" onclick="press('B')">B</button>
        <button class="hex" onclick="press('C')">C</button>
        <button class="hex" onclick="press('D')">D</button>
        <button class="hex" onclick="press('E')">E</button>
        <button class="hex" onclick="press('F')">F</button>

        <button onclick="press('7')">7</button>
        <button onclick="press('8')">8</button>
        <button onclick="press('9')">9</button>
        <button class="special" onclick="del()">DEL</button>
        <button class="special" onclick="clearAll()">AC</button>

        <button onclick="press('4')">4</button>
        <button onclick="press('5')">5</button>
        <button onclick="press('6')">6</button>
        <button class="op" onclick="press('*')">×</button>
        <button class="op" onclick="press('/')">÷</button>

        <button onclick="press('1')">1</button>
        <button onclick="press('2')">2</button>
        <button onclick="press('3')">3</button>
        <button class="op" onclick="press('+')">+</button>
        <button class="op" onclick="press('-')">-</button>

        <button onclick="press('0')">0</button>
        <button onclick="press('.')">.</button>
        <button class="special" style="grid-column: span 2" onclick="calculate()">=</button>
        <button class="special">?</button>
    </div>
</div>

<script>
    let currentMode = 'std';
    let currentInput = "0";

    function switchMode(mode) {
        currentMode = mode;
        const hexBtns = document.querySelectorAll('.hex');
        const grid = document.getElementById('button-grid');
        
        if(mode === 'prog') {
            document.getElementById('prog-screen').style.display = 'flex';
            document.getElementById('std-screen').style.display = 'none';
            hexBtns.forEach(b => b.style.display = 'block');
            grid.style.gridTemplateColumns = 'repeat(5, 1fr)';
            document.getElementById('btn-prog').classList.add('active-mode-btn');
            document.getElementById('btn-std').classList.remove('active-mode-btn');
        } else {
            document.getElementById('prog-screen').style.display = 'none';
            document.getElementById('std-screen').style.display = 'block';
            hexBtns.forEach(b => b.style.display = 'none');
            grid.style.gridTemplateColumns = 'repeat(5, 1fr)';
            document.getElementById('btn-std').classList.add('active-mode-btn');
            document.getElementById('btn-prog').classList.remove('active-mode-btn');
        }
    }

    function press(val) {
        if(currentInput === "0") currentInput = val;
        else currentInput += val;
        updateDisplays();
    }

    function clearAll() {
        currentInput = "0";
        updateDisplays();
    }

    function del() {
        currentInput = currentInput.length > 1 ? currentInput.slice(0, -1) : "0";
        updateDisplays();
    }

    function updateDisplays() {
        // Pantalla Estándar
        document.getElementById('main-display').innerText = currentInput;

        // Lógica de Programador
        try {
            // Intentamos convertir a número decimal para las bases
            let num = parseInt(currentInput, 10);
            if(!isNaN(num)) {
                document.getElementById('val-hex').innerText = num.toString(16).toUpperCase();
                document.getElementById('val-dec').innerText = num.toString(10);
                document.getElementById('val-oct').innerText = num.toString(8);
                document.getElementById('val-bin').innerText = num.toString(2).padStart(8, '0').replace(/(.{4})/g, '$1 ');
            }
        } catch(e) {}
    }

    function calculate() {
        try {
            currentInput = eval(currentInput.replace('×', '*').replace('÷', '/')).toString();
            updateDisplays();
        } catch(e) {
            currentInput = "Error";
            updateDisplays();
        }
    }
</script>
</body>
</html>
